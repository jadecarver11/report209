<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>íŠ¸ë Œë”” ë°ìŠ¤í¬íƒ‘ â€” Paperlogy</title>

  <!-- Paperlogy ì›¹í°íŠ¸ ë¡œë“œ -->
  @import url('https://cdn.jsdelivr.net/gh/fonts-archive/Paperlogy/Paperlogy.css');
  <style>
    /* ê¸°ë³¸ ë¦¬ì…‹ */
    :root{
      --bg:#ffffff;
      --black:#0b0b0c;
      --purple-1:#6b21a8; /* ë³´ë¼ ê³„ì—´ */
      --purple-2:#9b5cf6; /* ê·¸ë¼ë””ì–¸íŠ¸ */
      --accent-gradient: linear-gradient(135deg,var(--purple-1),var(--purple-2));
      --shadow-1: 0 6px 18px rgba(15,12,30,0.12);
      --shadow-2: 0 18px 40px rgba(15,12,30,0.08);
      --glass: rgba(255,255,255,0.7);
    }
    html,body{height:100%;}
    body{
      margin:0; padding:0; min-height:100%;
      font-family: 'Paperlogy', system-ui, -apple-system, 'Segoe UI', Roboto, 'Noto Sans KR', 'Helvetica Neue', Arial;
      background: var(--bg);
      color:var(--black);
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      overflow:hidden;
    }

    /* ë°”íƒ•í™”ë©´ ì»¨í…Œì´ë„ˆ */
    .desktop {
      position:relative;
      width:100vw; height:100vh;
      padding:28px 40px;
      box-sizing:border-box;
      background: linear-gradient(180deg, rgba(255,255,255,1) 0%, rgba(250,249,255,1) 100%);
      display:flex; flex-direction:column;
    }

    /* ìƒë‹¨ ê°€ìš´ë° íƒ€ì´í‹€ (ì„ íƒ) */
    .title-bar{
      display:flex; align-items:center; justify-content:center;
      pointer-events:none;
      margin-bottom:12px;
    }
    .title{
      font-size:18px; font-weight:700; letter-spacing:-0.02em;
      background: -webkit-linear-gradient(90deg, #111, #6b21a8);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      text-shadow: 0 1px 0 rgba(255,255,255,0.6);
    }

    /* ì•„ì´ì½˜ ê·¸ë¦¬ë“œ */
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, 110px);
      grid-auto-rows: 120px;
      gap:18px 28px;
      align-content:start;
      overflow:auto; padding:12px;
      flex:1;
    }

    /* í´ë” ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ */
    .folder{
      width:100px; height:100px; border-radius:12px;
      display:flex; flex-direction:column; align-items:center; justify-content:flex-start;
      padding:10px; box-sizing:border-box; cursor:default;
      transition:transform .18s ease, box-shadow .18s ease;
      user-select:none;
    }
    .folder .glyph{
      width:64px; height:48px; border-radius:10px;
      display:flex; align-items:center; justify-content:center;
      font-size:30px; font-weight:700;
      background: var(--accent-gradient);
      box-shadow: var(--shadow-1);
      transform:translateY(2px);
    }
    .folder .label{
      margin-top:8px; font-size:13px; text-align:center; line-height:1.1;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis; width:100%;
      color: #0b0b0c; font-weight:500;
    }

    .folder:hover{ transform: translateY(-6px); box-shadow: var(--shadow-2); }

    /* ë” ëª¨ë˜í•œ ê·¸ë¦¼ìì™€ ë¯¸ì„¸í•œ ë¸”ëŸ¬ */
    .desktop::after{
      content:""; position:absolute; inset:0; pointer-events:none;
      background-image: radial-gradient(circle at 10% 10%, rgba(155,92,246,0.035), transparent 8%), radial-gradient(circle at 90% 90%, rgba(107,33,168,0.03), transparent 6%);
      mix-blend-mode:overlay;
    }

    /* í´ë” ëª¨ë‹¬ (ë”ë¸”í´ë¦­ ì˜¤í”ˆ ì‹œ) */
    .modal{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center; z-index:60;
    }
    .modal .sheet{
      width:min(880px,94%); max-height:84vh; overflow:auto;
      background: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(250,249,255,0.95));
      border-radius:14px; padding:18px; box-shadow: 0 40px 80px rgba(11,11,12,0.12);
    }
    .modal.active{ display:flex; }

    /* íˆ´ë°”(ì˜¤ë¥¸ìª½ í•˜ë‹¨) */
    .dock{
      position:fixed; right:24px; bottom:24px; z-index:80; display:flex; gap:10px; align-items:center;
    }
    .dock .btn{
      min-width:56px; padding:10px 12px; border-radius:12px; font-weight:600;
      background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.6));
      box-shadow: 0 8px 30px rgba(11,11,12,0.08);
      cursor:pointer;
    }

    /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ (ë°ìŠ¤í¬íƒ‘ì²˜ëŸ¼ ì€ì€í•˜ê²Œ) */
    .grid::-webkit-scrollbar{ width:10px; height:10px; }
    .grid::-webkit-scrollbar-thumb{ border-radius:999px; background:linear-gradient(180deg, rgba(107,33,168,0.14), rgba(155,92,246,0.08)); }

    /* ë°˜ì‘í˜• - ì‘ì€ í™”ë©´ì—ì„œ í•œ ì¤„ì— ë” ì ìŒ */
    @media (max-width:480px){ .grid{ gap:12px 16px; grid-template-columns: repeat(auto-fill, 86px); } .folder{ width:86px; height:86px; } }
  </style>
</head>
<body>
  <div class="desktop">
    <div class="title-bar"><div class="title">íŠ¸ë Œë”” ë°ìŠ¤í¬íƒ‘</div></div>

    <div id="grid" class="grid" aria-live="polite">
      <!-- í´ë”ë“¤ì´ ì—¬ê¸°ë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤. -->
    </div>

    <div class="dock">
      <div id="refresh" class="btn">í´ë” ìƒˆë¡œê³ ì¹¨</div>
      <div id="help" class="btn">ì‚¬ìš©ë²•</div>
    </div>
  </div>

  <!-- í´ë” ë‚´ìš© ëª¨ë‹¬ -->
  <div id="modal" class="modal" role="dialog" aria-hidden="true">
    <div class="sheet" id="sheet"></div>
  </div>

  <script>
    // ì‚¬ìš©ë²•: ê°™ì€ ë””ë ‰í„°ë¦¬ì— "folder.txt" íŒŒì¼ì„ ë‘ì„¸ìš”.
    // íŒŒì¼ í¬ë§· (í•œ ì¤„ì— í•˜ë‚˜):
    // ì´ë¦„,ì•„ì´ì½˜(ì„ íƒ)
    // ì˜ˆ: Documents,ğŸ“
    // ì˜ˆ: ê°œì¸í”„ë¡œì íŠ¸
    // ë¹ˆ ì¤„ê³¼ #ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ì¤„ì€ ë¬´ì‹œí•©ë‹ˆë‹¤.

    const GRID = document.getElementById('grid');
    const MODAL = document.getElementById('modal');
    const SHEET = document.getElementById('sheet');

    async function loadFolders(){
      GRID.innerHTML = '';
      try{
        const res = await fetch('folder.txt', {cache: 'no-store'});
        if(!res.ok) throw new Error('í´ë” íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ (folder.txt).');
        const text = await res.text();
        const lines = text.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
        const items = lines.filter(l => !l.startsWith('#'));

        if(items.length === 0){
          GRID.innerHTML = '<div style="opacity:.6;padding:18px">folder.txt ì— í´ë” ëª©ë¡ì„ ì¶”ê°€í•˜ì„¸ìš”. (í•œ ì¤„ì— í•˜ë‚˜ â€” ì˜ˆ: Documents,ğŸ“)</div>';
          return;
        }

        items.forEach((line, idx) => {
          // ë¶„í•´: name, optional glyph
          const parts = line.split(',');
          const name = parts[0].trim();
          const glyph = parts[1] ? parts[1].trim() : 'ğŸ“';

          const el = document.createElement('button');
          el.className = 'folder';
          el.setAttribute('data-name', name);
          el.setAttribute('aria-label', name);
          el.innerHTML = `\n            <div class="glyph" aria-hidden="true">${escapeHtml(glyph)}</div>\n            <div class="label">${escapeHtml(name)}</div>\n          `;

          // ë”ë¸”í´ë¦­ìœ¼ë¡œ ì—´ê¸°
          let clickTimer = null;
          el.addEventListener('click', (e) => {
            // ë”ë¸” í´ë¦­ ì²˜ë¦¬ë¥¼ ìœ„í•´ íƒ€ì´ë¨¸ ì‚¬ìš©
            if(clickTimer){ clearTimeout(clickTimer); clickTimer = null; openFolder(name, glyph); return; }
            clickTimer = setTimeout(()=>{ clearTimeout(clickTimer); clickTimer = null; /* single click: ì„ íƒ(ìŠ¤íƒ€ì¼) ê°€ëŠ¥ */ toggleSelect(el); }, 250);
          });

          // ìš°í´ë¦­ ë©”ë‰´ ë¹„í™œì„±í™” (ë°ìŠ¤í¬íƒ‘ ëŠë‚Œ)
          el.addEventListener('contextmenu', e => e.preventDefault());

          GRID.appendChild(el);
        });

      }catch(err){
        GRID.innerHTML = `<div style="color:#b00;padding:18px">ë¡œë“œ ì—ëŸ¬: ${escapeHtml(err.message)}</div>`;
      }
    }

    // ì„ íƒ í† ê¸€
    function toggleSelect(el){
      if(el.classList.contains('selected')) el.classList.remove('selected');
      else el.classList.add('selected');
    }

    // í´ë” ì—´ê¸° ëª¨ë‹¬
    function openFolder(name, glyph){
      SHEET.innerHTML = `<h2 style="margin:0 0 8px;font-weight:700">${escapeHtml(name)}</h2><p style="margin:0 0 12px;opacity:.8">ì•„ì´ì½˜: ${escapeHtml(glyph)}</p><div style="color:#333;opacity:.9">(ì—¬ê¸°ì— í´ë” ë‚´ë¶€ ë‚´ìš©ì„ ì±„ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.)</div><div style="height:12px"></div><div><button id=closeBtn style="padding:8px 12px;border-radius:10px">ë‹«ê¸°</button></div>`;
      MODAL.classList.add('active'); MODAL.setAttribute('aria-hidden','false');
      document.getElementById('closeBtn').addEventListener('click', closeModal);
    }
    function closeModal(){ MODAL.classList.remove('active'); MODAL.setAttribute('aria-hidden','true'); }

    // ì•ˆì „í•œ HTML ì´ìŠ¤ì¼€ì´í”„
    function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

    // UI ë²„íŠ¼ë“¤
    document.getElementById('refresh').addEventListener('click', loadFolders);
    document.getElementById('help').addEventListener('click', ()=> alert('folder.txt íŒŒì¼ì„ ê°™ì€ í´ë”ì— ë‘ê³ , í•œ ì¤„ì— í•˜ë‚˜ì”© í´ë” ì´ë¦„(ì˜µì…˜: ì•„ì´ì½˜)ì„ ë„£ìœ¼ì„¸ìš”. ì˜ˆ: Documents,ğŸ“'));

    // ì´ˆê¸° ë¡œë“œ
    loadFolders();

    // ESCë¡œ ëª¨ë‹¬ ë‹«ê¸°
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeModal(); });
  </script>
</body>
</html>
